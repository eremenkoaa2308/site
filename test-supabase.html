<!DOCTYPE html>
<html>
<head>
    <title>–¢–µ—Å—Ç Supabase</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <h1>–¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Supabase</h1>
    <div id="result"></div>
    
    <script>
        // –í–∞—à–∏ –∫–ª—é—á–∏
        const SUPABASE_URL = 'https://puegfmyflnyrbmjanwgt.supabase.co';
        const SUPABASE_KEY = 'sb_publishable_VmPYD4BzsIQbA01Cp7OTGg_w6c7qUIl';
        
        // –°–æ–∑–¥–∞–µ–º –∫–ª–∏–µ–Ω—Ç
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
        
        async function testConnection() {
            const resultDiv = document.getElementById('result');
            
            try {
                resultDiv.innerHTML = '<p>üîÑ –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ Supabase...</p>';
                
                // –ü—Ä–æ–±—É–µ–º –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã votes
                const { data, error, count } = await supabase
                    .from('votes')
                    .select('*', { count: 'exact' });
                
                if (error) {
                    resultDiv.innerHTML = `
                        <p style="color: red;">‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:</p>
                        <pre>${JSON.stringify(error, null, 2)}</pre>
                        <p>–í–æ–∑–º–æ–∂–Ω–æ, —Ç–∞–±–ª–∏—Ü–∞ "votes" –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç</p>
                    `;
                } else {
                    resultDiv.innerHTML = `
                        <p style="color: green;">‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ!</p>
                        <p>URL: ${SUPABASE_URL}</p>
                        <p>–ö–ª—é—á: ${SUPABASE_KEY.substring(0, 20)}...</p>
                        <p>–ó–∞–ø–∏—Å–µ–π –≤ —Ç–∞–±–ª–∏—Ü–µ votes: ${count}</p>
                        <p>–î–∞–Ω–Ω—ã–µ: ${JSON.stringify(data)}</p>
                    `;
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <p style="color: red;">‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞:</p>
                    <pre>${error.message}</pre>
                `;
            }
        }
        
        // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = testConnection;
    </script>
</body>
</html>